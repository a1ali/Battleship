(()=>{"use strict";const e=e=>{let t=document.createElement("div");for(let r=1;r<=100;r++){let n=document.createElement("div");n.innerText="",n.id=`${r}-${e.name}`,n.className="grids",t.appendChild(n)}let r="";for(let e=0;e<10;e++)r+="auto ";return t.className="grid-container",t.style["grid-template-columns"]=r,t.style.display="grid",t.id=`${e.name}-grid`,t},t=(e,t)=>{document.getElementById(`${e}-${t.name}`).style.backgroundColor="#ff3333"},r=()=>{let e=[],r=[],n=[],a=[];const l=()=>{for(let t=0;t<e.length;t++)if(!e[t].isSunk())return!1;return!0},o=(e,t)=>Math.floor(Math.random()*(t-e+1)+e),i=()=>{let e=o(1,5),t=o(1,9);return parseInt(`${t}${e}`)},s=e=>{let t=i(),r=[];for(;;)if(a.includes(t))r=[],t=i();else if(r.push(t),t+=1,5===r.length)break;return r};return{placeShip:(t,r)=>{let n=(e=>{let t=e;return{isHit:e=>!!t.includes(e)&&((e=>{t=((e,t)=>{let r=e.indexOf(t);return r>-1&&e.splice(r,1),e})(t,e)})(e),!0),isSunk:()=>0===t.length,getPos:()=>t,positionArr:t}})(t);e.push(n),((e,t)=>{t||e.forEach((e=>{document.getElementById(`${e}-player`).style.backgroundColor="#595959"}))})(t,r),t.forEach((e=>{a.push(e)}))},receiveAttack:(a,o)=>{if(r.includes(a)||n.includes(a)||l())return!1;{let l=!1;for(let r=0;r<e.length;r++)if(e[r].isHit(a)){l=!0,n.push(a),t(a,o);break}return l||(r.push(a),((e,t)=>{document.getElementById(`${e}-${t.name}`).style.backgroundColor="#000099"})(a,o)),!0}},allShipSunk:l,ships:e,occupiedPlaces:a,generateCarrier:()=>s(),generateBattleship:()=>s().slice(1,5),generateDestroyer:()=>s().slice(1,4),generateSubmarine:()=>s().slice(1,4),generatePatrolBoat:()=>s().slice(1,3)}},n=e=>{let t=r();const n=()=>{t.placeShip(t.generateCarrier(),e),t.placeShip(t.generateBattleship(),e),t.placeShip(t.generateDestroyer(),e),t.placeShip(t.generateSubmarine(),e),t.placeShip(t.generatePatrolBoat(),e)};e&&n();const a=e=>{let t=Math.floor(100*Math.random())+1;for(;e.attacks.includes(t);)t=Math.floor(100*Math.random())+1;return t};return{computerMove:t=>{if(e){let e=a(t);t.board.receiveAttack(e,t),t.attacks.push(e),t.board.allShipSunk()&&console.log("game over Computer Wins")}},humanMove:(t,r)=>{if(!e&&!r.attacks.includes(t)&&r.board.receiveAttack(t,r))return r.attacks.push(t),r.board.allShipSunk()&&console.log("game over player wins"),!0},getRandomLoc:a,name:e?"computer":"player",attacks:[],board:t,createShipsForComputer:n}},a=document.querySelector(".player1-start"),l=document.querySelector(".carrier-container"),o=document.querySelector(".battleship-container"),i=document.querySelector(".destroyer-container"),s=document.querySelector(".sub-container"),d=document.querySelector(".patrol-container");let c=null,u=null,p="hello",m=null;function g(e){p=e.target.classList[1].split("")[0],p=parseInt(p),m=e.target.classList[1].split("")[1]}function h(e){c=e.target,u=e,this.className+=" hold",setTimeout((()=>this.className="invisible"),0)}function y(e){this.className=this.id}function f(e){e.preventDefault()}function v(e){e.preventDefault(),this.className+=" hovered"}function S(){this.className="grids"}function E(e){e.preventDefault();let t=parseInt(this.id.split("-")[0]);!function(e,t,r){let n=t-e+1,a={c:5,b:4,d:3,s:3,p:2}[r],l=parseInt(n.toString().split("")[0]),o=parseInt(n.toString().split("")[1]);(5==a&&o>5||5==a&&isNaN(o)&&l>5)&&(n=isNaN(o)?6:parseInt(`${l}6`)),(1==e&&0==o||0===o&&1===l)&&(n=parseInt(l-1+"6"));for(let e=n;e<a+n;e++)document.getElementById(`${e}-player`).style.backgroundColor="#595959"}(p,t,m)}let k=(()=>{let t=document.querySelector(".player1"),r=document.querySelector(".player2"),c=(document.querySelector(".player1-start"),document.querySelector(".container"),n(!1)),u=n(!0);var p;return p=e(c),a.appendChild(p),setTimeout((()=>function(){l.addEventListener("mousedown",g),l.addEventListener("dragstart",h),l.addEventListener("dragend",y),o.addEventListener("dragstart",h),o.addEventListener("dragend",y),i.addEventListener("dragstart",h),i.addEventListener("dragend",y),s.addEventListener("dragstart",h),s.addEventListener("dragend",y),d.addEventListener("dragstart",h),d.addEventListener("dragend",y);for(let e=1;e<=100;e++){let t=document.getElementById(`${e}-player`);t.addEventListener("dragover",f),t.addEventListener("dragenter",v),t.addEventListener("dragleave",S),t.addEventListener("drop",E)}}()),0),t.appendChild(e(c)),r.appendChild(e(u)),{playGame:e=>{console.log(e),c.humanMove(e,u)&&u.computerMove(c)}}})();document.getElementById("computer-grid").addEventListener("click",(e=>{if("computer-grid"!==e.target.id){let t=e.target.id,r=parseInt(t.split("-")[0]);k.playGame(r)}}))})();