(()=>{"use strict";const e=e=>{let t=document.createElement("div");for(let r=1;r<=100;r++){let a=document.createElement("div");a.innerText="",a.id=`${r}-${e.name}`,a.className="grids",t.appendChild(a)}let r="";for(let e=0;e<10;e++)r+="auto ";return t.className="grid-container",t.style["grid-template-columns"]=r,t.style.display="grid",t.id=`${e.name}-grid`,t},t=(e,t)=>{document.getElementById(`${e}-${t.name}`).style.backgroundColor="#ff3333"},r=()=>{let e=[],r=[],a=[],l=[];const n=()=>{for(let t=0;t<e.length;t++)if(!e[t].isSunk())return!1;return!0},o=(e,t)=>Math.floor(Math.random()*(t-e+1)+e),i=()=>{let e=o(1,5),t=o(1,9);return parseInt(`${t}${e}`)},c=e=>{let t=i(),r=[];for(;;)if(l.includes(t))r=[],t=i();else if(r.push(t),t+=1,5===r.length)break;return r};return{placeShip:(t,r)=>{let a=(e=>{let t=e;return{isHit:e=>!!t.includes(e)&&((e=>{t=((e,t)=>{let r=e.indexOf(t);return r>-1&&e.splice(r,1),e})(t,e)})(e),!0),isSunk:()=>0===t.length,getPos:()=>t,positionArr:t}})(t);e.push(a),((e,t)=>{t||e.forEach((e=>{document.getElementById(`${e}-player`).style.backgroundColor="#595959"}))})(t,r),t.forEach((e=>{l.push(e)}))},receiveAttack:(l,o)=>{if(r.includes(l)||a.includes(l)||n())return!1;{let n=!1;for(let r=0;r<e.length;r++)if(e[r].isHit(l)){n=!0,a.push(l),t(l,o);break}return n||(r.push(l),((e,t)=>{document.getElementById(`${e}-${t.name}`).style.backgroundColor="#000099"})(l,o)),!0}},allShipSunk:n,ships:e,occupiedPlaces:l,generateCarrier:()=>c(),generateBattleship:()=>c().slice(1,5),generateDestroyer:()=>c().slice(1,4),generateSubmarine:()=>c().slice(1,4),generatePatrolBoat:()=>c().slice(1,3)}},a=e=>{let t=r();const a=()=>{t.placeShip(t.generateCarrier(),e),t.placeShip(t.generateBattleship(),e),t.placeShip(t.generateDestroyer(),e),t.placeShip(t.generateSubmarine(),e),t.placeShip(t.generateSubmarine(),e),t.placeShip(t.generatePatrolBoat(),e),t.placeShip(t.generatePatrolBoat(),e)};e&&a();const l=e=>{let t=Math.floor(100*Math.random())+1;for(;e.attacks.includes(t);)t=Math.floor(100*Math.random())+1;return t};return{computerMove:t=>{if(e){let e=l(t);t.board.receiveAttack(e,t),t.attacks.push(e),t.board.allShipSunk()&&console.log("game over Computer Wins")}},humanMove:(t,r)=>{if(!e&&!r.attacks.includes(t)&&r.board.receiveAttack(t,r))return r.attacks.push(t),r.board.allShipSunk()&&console.log("game over player wins"),!0},getRandomLoc:l,name:e?"computer":"player",attacks:[],board:t,createShipsForComputer:a}};let l=(()=>{let t=document.querySelector(".player1"),r=document.querySelector(".player2"),l=a(!1),n=a(!0);return t.appendChild(e(l)),r.appendChild(e(n)),l.createShipsForComputer(),{playGame:e=>{console.log(e),l.humanMove(e,n),n.computerMove(l)}}})();document.getElementById("computer-grid").addEventListener("click",(e=>{let t=e.target.id,r=parseInt(t.split("-")[0]);l.playGame(r)}))})();